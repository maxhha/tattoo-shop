{"version":3,"sources":["assets/images/logo.png","apis/StoreContext.ts","components/CartContext.ts","components/commons/LinkButton/index.tsx","components/Header/Menu/index.tsx","components/Header/index.tsx","components/commons/ModalSwitch.tsx","components/TattooPage/index.tsx","components/TattooPage/Modal.tsx","components/Content/About.tsx","components/Content/Section/TattooItem.tsx","components/Content/Section/index.tsx","components/Content/Home.tsx","components/Content/Cart/index.tsx","components/Content/Payment.tsx","components/Content/Delivery.tsx","components/Content/Contacts.tsx","components/Content/index.tsx","components/Footer/index.tsx","App.tsx","serviceWorker.ts","apis/Store.ts","index.tsx"],"names":["module","exports","__webpack_require__","p","StoreContext","createContext","CartReducer","state","action","type","Object","objectSpread","items","concat","toConsumableArray","item","hidden","price","find","i","id","filter","newItem","console","log","map","it","_a","withRouter","props","history","to","location","match","staticContext","onClick","replace","rest","objectWithoutProperties","react_default","a","createElement","assign","event","push","Menu","_useState","useState","_useState2","slicedToArray","menuVisible","setMenuVisibility","refMenu","createRef","useEffect","handleClick","e","target","current","contains","document","addEventListener","removeEventListener","hide","className","classNames","ref","title","menu__popup-list_active","children","f","el","key","Header","_React$useState","React","_React$useState2","sections","setSections","getSections","useContext","then","s","Header_Menu","_ref","commons_LinkButton","disabled","react_router","render","_ref2","src","logo","alt","ModalSwitch","previousLocation","_this","nextProps","this","isModal","modal","_this$props","switchChildren","modalRoute","Component","ModalSwitchRoute","routeProps","ModalSwitch_ModalSwitch","params","undefined","loading","_useState2$","setLoaderState","findItem","_useContext2","CartContext","_useContext3","cart","dispatchCart","addedToCart","stopPropagation","imageUrl","goBack","TattooPageModal","RemoveScroll","fullWidth","Combination","components_TattooPage","About","href","TattooItem","react_router_dom","pathname","Section","Section_TattooItem","Home","setItems","getItems","Promise","all","section","loadedItems","length","Content_Section","slice","CartItem","onRemove","onHide","onShow","Cart","_useContext","_useContext2$","Cart_CartItem","Payment","Delivery","Contacts","SectionPage","sectionId","_useState3","_useState4","setSection","_useState5","_useState6","_useState7","_useState8","loaded","setLoaded","findSection","Content","commons_ModalSwitch","exact","path","Content_Home","component","Content_SectionPage","TattooPage_Modal","Footer","hot","store","setVersion","saveKey","fn","cartReduced","useReducer","result","apply","arguments","window","localStorage","setItem","JSON","stringify","error","initState","data","getItem","parse","reducerLocalStorageInit","apis_StoreContext","Provider","value","components_Header","components_Content","components_Footer","Boolean","hostname","sectionNames","split","tattooAdjective","tattooNoun","getRandomTattooName","adj","sample","noun","capitalize","trim","Store","ACCESS_APP_KEY","APP_SECRET","__version","classCallCheck","__unsplash","__database","__databaseLoadPromise","v","__loadDatabase","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","abrupt","stop","_callee2","_context2","_x","_ref4","_callee3","_ref3","_context3","_x2","_ref5","_callee4","_context4","values","flat","_x3","Error","Unsplash","applicationId","secret","database","__getDatabaseFromLocalStorage","resolve","promise","__loadDatabaseFromService","_this2","__saveDatabaseToLocalStorage","db","isTargetVersion","search","photos","COUNT_ITEMS_PER_SECTION","toJson","json","toString","results","forEach","_ref6","raw","urls","Math","floor","random","_this3","catch","process","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.95bef1e1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.99ea3e58.png\";","import {createContext, Context} from 'react';\nimport { IStore } from 'types';\n\nconst StoreContext : Context<IStore> = createContext({} as IStore);\n\nexport default StoreContext;\n","import { createContext } from \"react\";\n\nimport { StoreItem, CartItem } from \"types\";\n\ninterface CartState {\n    items: CartItem[],\n    price: number\n}\n\ninterface ActionAdd {\n    type: 'add'\n    item: StoreItem\n}\n\ninterface ActionRemove {\n    type: 'remove'\n    id: string\n}\n\ninterface ActionHide {\n    type: 'hide'\n    item: CartItem\n}\n\ninterface ActionShow {\n    type: 'show'\n    item: CartItem\n}\n\ntype Action = ActionAdd | ActionRemove | ActionHide | ActionShow;\n\nexport const CartReducer = (state : CartState, action : Action) => {\n    switch(action.type){\n        case 'add': {\n            return {\n                ...state,\n                items: [\n                    ...state.items,\n                    {...action.item, hidden: false}\n                ],\n                price: state.price + action.item.price\n            }\n        } case 'remove': {\n            const item = state.items.find(i => i.id === action.id);\n            return {\n                ...state,\n                items: state.items.filter(i => i !== item),\n                price: item ? state.price - item.price : state.price\n            }\n        } case 'show': {\n            const item = action.item;\n            const newItem = {...item, hidden: false};\n            let price = state.price;\n            console.log(\"show\");\n            console.log(item);\n            if (item.hidden) {\n                price += item.price;\n            }\n            return {\n                ...state,\n                items:\n                    state.items.map(it => it === item ? newItem : it),\n                price\n            }\n        } case 'hide': {\n            const item = action.item;\n            const newItem = {...item, hidden: true};\n            let price = state.price;\n            console.log(\"hide\");\n            console.log(item);\n            if (!item.hidden) {\n                price -= item.price;\n            }\n            return {\n                ...state,\n                items:\n                    state.items.map(it => it === item ? newItem : it),\n                price\n            }\n        }\n    }\n};\n\ntype ContextType = [CartState, React.Dispatch<Action>];\n\nconst initialState : ContextType = [\n    {items: [], price: 0},\n    (_a) => {}\n]\n\nexport default createContext<ContextType>(initialState);\n","import React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport * as H from \"history\";\n\ninterface LinkButtonProps extends RouteComponentProps<any>, React.ButtonHTMLAttributes<HTMLButtonElement> {\n    to: H.LocationDescriptor;\n    replace?: boolean;\n    innerRef?: React.Ref<HTMLAnchorElement>;\n}\n\nconst LinkButton : React.FC<LinkButtonProps> = (props) => {\n  const {\n    history,\n    location,\n    match,\n    staticContext,\n    to,\n    onClick,\n    replace,\n    // ⬆ filtering out props that 'button' doesnt know what to do with.\n    ...rest\n  } = props\n  return (\n    <button\n      {...rest} // 'children' is just another prop!\n      onClick={(event) => {\n        onClick && onClick(event);\n        const method = replace ? history.replace : history.push;\n        method(to as any) // rude fix of some type casting bug\n      }}\n    />\n  )\n}\n\nexport default withRouter(LinkButton);\n","// Menu\nimport React, {useState, useEffect, createRef} from 'react';\nimport classNames from \"classnames\";\nimport \"./Menu.scss\";\n\ntype Props = {\n    className?: string,\n    children: ((hide: () => void, hidden: boolean) => (React.ReactElement | {key: any}))[],\n    title: string\n}\n\nconst Menu : React.SFC<Props> = (props) => {\n\n    const [menuVisible, setMenuVisibility] = useState(false);\n    const refMenu = createRef<HTMLDivElement>()\n\n    useEffect(() => {\n        const handleClick = (e : Event) => {\n            if (e.target && refMenu.current && !refMenu.current.contains(e.target as Node))\n                setMenuVisibility(false)\n        };\n        document.addEventListener('click', handleClick)\n        return () => {\n            document.removeEventListener('click', handleClick)\n        }\n    })\n\n    const hide = () => setMenuVisibility(false)\n\n    return (\n        <div className={classNames(\"menu\", props.className)} ref={refMenu}>\n            <div className=\"menu__title\" onClick={()=>setMenuVisibility(true)}>{props.title}</div>\n            <ul className={classNames(\"menu__popup-list\", {'menu__popup-list_active':menuVisible})}>\n                {props.children.map((f) => {\n                    let el = f(hide, !menuVisible);\n                    return (<li className=\"menu__item\" key={el.key}>\n                        {el}\n                    </li>)\n                })}\n            </ul>\n        </div>\n    );\n};\n\nexport default Menu;\n","// Header\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport LinkButton from 'components/commons/LinkButton';\nimport Menu from \"./Menu\";\nimport classNames from \"classnames\";\nimport logo from \"assets/images/logo.png\";\nimport \"./Header.scss\";\n\nimport { StoreSection } from \"types\";\nimport StoreContext from \"apis/StoreContext\";\n\ntype Props = {className?: string}\n\nconst Header : React.SFC<Props> = (props) => {\n\n    const  [sections, setSections] = React.useState([] as StoreSection[]);\n    const { getSections } = React.useContext(StoreContext);\n    React.useEffect(() => {\n        getSections().then((s) => setSections(s))\n    }, [getSections])\n\n    return (\n        <header className={classNames(\"header\", props.className)}>\n            <nav className=\"nav header__side header__nav\">\n                <Menu className=\"nav__menu\" title=\"Категроии\">\n                    {sections.map(({id, title}) => (hide : () => void, hidden: boolean) =>\n                            <LinkButton\n                                to={`/section/${id}`}\n                                className=\"nav__button nav__menu-item\"\n                                key={id}\n                                onClick={hide}\n                                disabled={hidden}\n                            >{title}</LinkButton>\n                    )}\n                </Menu>\n                <LinkButton to='/about' className=\"button nav__button\">О нас</LinkButton>\n                <LinkButton to='/contacts' className=\"button nav__button\">Контакты</LinkButton>\n            </nav>\n            <Route render={({history})=>\n                <img\n                    className=\"header__logo\"\n                    onClick={() => history.push('/')}\n                    src={logo}\n                    alt=\"Logo\"\n                />\n            }/>\n            <nav className=\"nav header__side header__nav\">\n                <LinkButton to='/cart' className=\"button nav__button\">Корзина</LinkButton>\n                <LinkButton to='/payment' className=\"button nav__button\">Оплата</LinkButton>\n                <LinkButton to='/delivery' className=\"button nav__button\">Доставка</LinkButton>\n            </nav>\n        </header>\n    );\n};\n\nexport default Header;\n","import React from 'react';\nimport { Switch, Route, RouteComponentProps } from \"react-router-dom\";\n\ninterface ModalSwitchRouteProps {\n    switchChildren?: React.ReactNode,\n    modalRoute?: React.ReactElement<Route>\n}\n\nconst ModalSwitchRoute : React.FC<ModalSwitchRouteProps> = (props) => {\n    return (<Route render={routeProps =>\n        <ModalSwitch {...routeProps} {...props}/>\n    } />);\n}\n\ninterface ModalSwitchProps extends ModalSwitchRouteProps, RouteComponentProps<any, any, any>{}\n\nclass ModalSwitch extends React.Component<ModalSwitchProps>{\n    previousLocation = this.props.location;\n\n    componentWillUpdate(nextProps : ModalSwitchProps) {\n        let { location } = this.props;\n\n        const isModal = (!location.state || !location.state.modal);\n\n        if (\n          nextProps.history.action !== \"POP\" &&\n          isModal\n        ) {\n          this.previousLocation = this.props.location;\n        }\n    }\n\n    render() {\n        const { location, switchChildren,  modalRoute} = this.props;\n\n        const isModal = !!(\n          location.state &&\n          location.state.modal &&\n          this.previousLocation !== location\n        ); // not initial render\n\n        return (<div>\n            <Switch\n                location={isModal ? this.previousLocation : location}\n                children={switchChildren}\n            />\n            {isModal ? modalRoute : null}\n      </div>)\n    }\n}\n\nexport default ModalSwitchRoute;\n","//Tattoo Page\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router\";\nimport \"components/commons/cart-button.scss\";\nimport \"./TattooPage.scss\";\nimport classNames from \"classnames\";\nimport { StoreItem } from \"types\";\n\nimport StoreContext from \"apis/StoreContext\";\nimport CartContext from \"components/CartContext\";\n\ninterface MatchProps {\n    id: string\n}\n\ninterface Props extends RouteComponentProps<MatchProps> {\n    className?: string\n}\n\nconst TattooPage : React.FC<Props> = (props) => {\n    const params = props.match && props.match.params;\n    const { id } = params || {id: undefined};\n\n    const [{item, loading}, setLoaderState] = useState<{\n        item: StoreItem | null,\n        loading: boolean\n    }>({\n        item: null, loading: true\n    });\n\n    const { findItem } = useContext(StoreContext);\n    const [cart, dispatchCart] = useContext(CartContext);\n    const addedToCart = !!id && !!cart.items.find(i => i.id === id);\n\n    useEffect(() => {\n        if (id)\n            findItem(id).then((item) => setLoaderState({item, loading: false}));\n    },[findItem, setLoaderState, id]);\n\n    const isModal = (!props.location.state || !props.location.state.modal);\n\n    if (id && !loading && item) {\n        return (\n            <div\n                className={classNames(\"tattoo-page\", props.className)}\n                onClick={(e) => e.stopPropagation()}\n            >\n                <div className=\"tattoo-page__image-wrapper\">\n                    <img\n                        className=\"tattoo-page__image\"\n                        src={`${item.imageUrl}?auto=format&fit=crop&w=640&q=90`}\n                        alt={item.title}\n                    />\n                </div>\n                <div className=\"tattoo-page__info\">\n                    <h2 className=\"tattoo-page__title\">{item.title}</h2>\n                    <h3 className=\"tattoo-page__price\">{item.price+\"р\"}</h3>\n                    <button\n                        className=\"cart-button tattoo-page__to-cart\"\n                        onClick={() => {\n                            if (addedToCart)\n                                dispatchCart({\n                                    type: \"remove\",\n                                    id: item.id\n                                })\n                            else if (!loading)\n                                dispatchCart({\n                                    type: \"add\",\n                                    item: item\n                                })\n                        }}\n                    >\n                        {addedToCart ? \"Убрать из корзины\" : \"В корзину\"}\n                    </button>\n                    <p className=\"tattoo-page__description\"> Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: сплочённость команды профессионалов в значительной степени обусловливает важность соответствующих условий активизации. А ещё стремящиеся вытеснить традиционное производство, нанотехнологии ограничены исключительно образом мышления. </p>\n                </div>\n                {isModal && (\n                    <button\n                        className=\"tattoo-page__close\"\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            props.history.goBack();\n                        }}\n                    />\n                )}\n            </div>\n        );\n    } else if (id && loading) {\n        return (<h2 >Loading...</h2>);\n    } else {\n        return (<h2>Oops... something broke</h2>);\n    }\n}\n\nexport default withRouter(TattooPage);\n","import React from \"react\";\nimport { RouteChildrenProps, Redirect } from \"react-router\";\nimport classNames from \"classnames\";\nimport {RemoveScroll} from \"react-remove-scroll\";\n\nimport \"./Modal.scss\";\nimport TattooPage from \"components/TattooPage\";\n\ninterface Props extends RouteChildrenProps<{id: string}> {\n    className?: string\n}\n\nconst TattooPageModal : React.FC<Props> = (props) => {\n\n    const params = props.match && props.match.params;\n    if (params && params.id) {\n        return (<div className={classNames(\"tattoo-modal\", props.className, RemoveScroll.classNames.fullWidth)} onClick={(e) => {\n            e.stopPropagation();\n            props.history.goBack();\n        }}>\n                <RemoveScroll className=\"tattoo-modal__inner\"><TattooPage /> </RemoveScroll>\n            </div>);\n    } else {\n        return <Redirect to=\"/\" />;\n    }\n}\n\nexport default TattooPageModal;\n","import React from \"react\";\n\nconst About : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">О нас</h2>\n            <p className=\"text-about\">Нет никаких нас.</p>\n            <p className=\"text-about\">\n            Этот сайт был создан <a href=\"https://github.com/maxhha\">мной</a>,\n            чтобы изучить связку <a href=\"https://reactjs.org/\">React</a>{' + '}\n            <a href=\"https://www.typescriptlang.org/\">Typescript</a>.\n            Попутно мне пришлось разобраться\n            c <a href=\"https://webpack.js.org/\">Webpack</a>'ом,\n            чтобы сконфигурировать автозагруку изменений приложения.\n            Вовремя разработки я старался соблюдать best practices, постоянно\n            гугля всякие мелочи, например: файловая структура проекта,\n            создание апи на клиенте, как сделать роутер-кнопку и т.д.\n            В общем, достаточно хорошо прокачал свои скилы в фронтенд разработке на React.\n            </p>\n            <p className=\"text-about\">\n            В целом, для этого проекта можно было не использовать Typescript,\n            потому что я почти всегда знал, какие аргументы нужны компонентам\n            и функциям, но в командной разработке, уверен, он сыграет важную роль.\n            Не могло не радовать то, что, благодаря строгой типизации, каждый раз\n            после исправления всех подсвечиваемых ошибок в редакторе приложение всегда\n            работало так, как нужно {'>w<'}.\n            </p>\n            <p className=\"text-about\">\n            Названия категорий я взял из какого-то генератора названий, а картинки\n            из <a href=\"https://unsplash.com\">Unspash</a>.\n            Дизайн приложения придумал сам.</p>\n        </section>\n    </div>)\n}\n\nexport default About;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { StoreItem } from \"types\";\n\ntype Props = {\n    item: StoreItem,\n}\n\nconst TattooItem : React.FC<Props> = ({item}) => {\n    const {id, imageUrl, title, price} = item\n    return (\n        <li className=\"tattoos-list__item\">\n            <Link to={{\n                pathname: `/tattoo/${id}`,\n                state: {modal: true}\n            }}>\n                <div className=\"tattoo aspect-ratio-square\">\n                    <img className=\"tattoo__image\" src={`${imageUrl}?auto=format&fit=crop&w=640&q=80`} alt={imageUrl} />\n                    <div className=\"tattoo__description\">\n                        <h2 className=\"tattoo__title\">{title}</h2>\n                        <div className=\"tattoo__price-wrapper\">\n                            <h2 className=\"tattoo__price\">{price+'р'}</h2>\n                        </div>\n                    </div>\n                </div>\n            </Link>\n        </li>\n    )\n}\n\nexport default TattooItem;\n","// Section\nimport React from 'react';\nimport classNames from \"classnames\";\nimport './Section.scss';\nimport \"$commons/helpers.scss\";\n\nimport { StoreItem } from \"types\";\nimport TattooItem from \"./TattooItem\";\n\ntype Props = {\n    className?: string;\n    title: string;\n    items: StoreItem[];\n}\n\nclass Section extends React.Component<Props> {\n    render() {\n        const {className, title, items} = this.props;\n        return (\n            <section className={classNames(\"section\", className)}>\n                <h2 className=\"section__title\">{title}</h2>\n                <ul className=\"tattoos-list\">\n                    {items.map((item) => <TattooItem item={item} key={item.id} />)}\n                </ul>\n            </section>\n        )\n    }\n}\n\nexport default Section;\n","import { StoreSection, StoreItem } from \"types\";\nimport React, { useState, useEffect, useContext } from \"react\";\n\nimport StoreContext from \"apis/StoreContext\";\nimport Section from \"./Section\";\n\ntype HomeProps = {\n    sections: StoreSection[],\n}\n\nconst Home : React.FC<HomeProps> = ({ sections }) => {\n    const [items, setItems] = useState([] as StoreItem[][]);\n\n    const { getItems } = useContext(StoreContext);\n\n    useEffect(() => {\n        Promise.all(sections.map((section) => getItems(section)))\n            .then((loadedItems) => setItems(loadedItems));\n    }, [sections, getItems])\n\n    return (\n        <div className=\"content__inner\">\n            <div className=\"face-image\">\n                <div className=\"face-image__title\">\n                    КРУТЫЕ ТАТУХИ ДЕЛАЮТ ТЕБЯ КРУТЫМ!\n                </div>\n            </div>\n            {items.length > 0 && sections.map(({id, title}, i) =>\n                <Section\n                    className=\"content__section\"\n                    title={title}\n                    key={id}\n                    items={items[i].slice(0,8)}\n                />\n            )}\n        </div>\n    );\n}\n\nexport default Home;\n","// Cart\nimport React, { useContext } from \"react\";\nimport classNames from \"classnames\";\nimport \"components/commons/cart-button.scss\";\nimport \"./Cart.scss\";\n\nimport { CartItem as ICartItem } from \"types\";\nimport CartContext from \"components/CartContext\";\nimport LinkButton from \"components/commons/LinkButton\";\n\nconst Cart : React.FC = () => {\n    const [{items, price}, dispatchCart] = useContext(CartContext);\n\n    const onHide = (item: ICartItem) =>\n        dispatchCart({type: \"hide\", item});\n\n    const onShow = (item: ICartItem) =>\n        dispatchCart({type: \"show\", item});\n\n    const onRemove = (item: ICartItem) =>\n        dispatchCart({type: \"remove\", id: item.id});\n\n    return (<div className=\"content__inner\">\n        <div className=\"seciton content__section cart\">\n            <h2 className=\"section__title\">Корзина</h2>\n            <div className=\"cart-list\">\n                {items.map(i =>\n                    <CartItem\n                        item={i}\n                        onHide={onHide}\n                        onShow={onShow}\n                        onRemove={onRemove}\n                        key={i.id}/>\n                )}\n            </div>\n            <div className=\"cart__summary\">\n                <h2 className=\"cart__price\">\n                    Всего: {price}р\n                </h2>\n                <LinkButton\n                    className=\"cart-button\"\n                    to=\"/payment\"\n                >Перейти к оплате</LinkButton>\n            </div>\n        </div>\n    </div>)\n}\n\ntype CartItemProps = {\n    item: ICartItem;\n    onRemove: (item: ICartItem) => void;\n    onHide: (item: ICartItem) => void;\n    onShow: (item: ICartItem) => void;\n}\n\nconst CartItem : React.FC<CartItemProps> = ({item, onRemove, onHide, onShow}) => {\n    return (<div className={classNames(\"cart-item\", item.hidden && \"cart-item_hidden\")}>\n        <div className=\"cart-item__image-wrapper\">\n            <img\n                className=\"cart-item__image\"\n                src={item.imageUrl+\"&auto=format&fit=crop&w=320&q=80\"}\n                alt=\"Tattoo\"\n            />\n        </div>\n        <div className=\"cart-item__description\">\n            <h2 className=\"cart-item__title\">{item.title}</h2>\n            <h3 className=\"cart-item__price\">{item.price}р</h3>\n        </div>\n        <div className=\"cart-item__panel\">\n            <button\n                className=\"cart-button cart-item__button\"\n                onClick={() => onRemove(item)}\n            >\n                Убрать\n            </button>\n            <button\n                className=\"cart-button cart-item__button\"\n                onClick={() => item.hidden ? onShow(item) : onHide(item)}\n            >\n                {item.hidden ? \"Показать\" : \"Скрыть\"}\n            </button>\n        </div>\n    </div>);\n}\n\nexport default Cart;\n","// payment\nimport React from \"react\";\n\nconst Payment : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">Оплата</h2>\n            <p className=\"text-about\">Увы, это не настоящий магазин, и оплаты здесь нет.</p>\n        </section>\n    </div>);\n}\n\nexport default Payment;\n","// Delivery\nimport React from \"react\";\n\nconst Delivery : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">Доставка</h2>\n            <p className=\"text-about\">Увы, это не настоящий магазин, и доставки здесь тоже нет.</p>\n        </section>\n    </div>);\n}\n\nexport default Delivery;\n","// Contacts\nimport React from \"react\";\n\nconst Contacts : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">Контакты</h2>\n            <p className=\"text-about\">Github: <a href=\"https://github.com/maxhha\">maxhha</a></p>\n            <p className=\"text-about\">Mail: <a href=\"mailto:devmaxhha@gmail.com\" target=\"_self\">devmaxhha@gmail.com</a></p>\n        </section>\n    </div>);\n}\n\nexport default Contacts;\n","// Content\nimport { StoreSection } from \"types\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport classNames from \"classnames\";\nimport \"./Content.scss\";\n\nimport ModalSwitch from \"components/commons/ModalSwitch\";\nimport StoreContext from \"apis/StoreContext\";\nimport TattooPageModal from \"components/TattooPage/Modal\";\nimport About from \"./About\";\nimport Home from \"./Home\";\nimport Cart from \"./Cart\";\nimport Payment from \"./Payment\";\nimport Delivery from \"./Delivery\";\nimport Contacts from \"./Contacts\";\nimport Section from \"./Section\";\nimport { StoreItem } from \"types\";\n\ntype Props = {\n    className?: string;\n};\n\nconst Content : React.FC<Props> = (props) => {\n    const [sections, setSections] = useState([] as StoreSection[]);\n    const {getSections} = useContext(StoreContext);\n    useEffect(() => {\n        getSections().then((sections) => setSections(sections))\n    }, [getSections])\n    return (\n        <div\n            className={classNames(\"content\", props.className)}\n            >\n            <ModalSwitch\n                switchChildren={[\n                        <Route\n                            exact path=\"/\"\n                            render = {() => <Home sections={sections.slice(0,3)}/>}\n                        />,\n                        <Route\n                            path=\"/about\"\n                            component={About}\n                        />,\n                        <Route\n                            path=\"/cart\"\n                            component={Cart}\n                        />,\n                        <Route\n                            path=\"/payment\"\n                            component={Payment}\n                        />,\n                        <Route\n                            path=\"/delivery\"\n                            component={Delivery}\n                        />,\n                        <Route\n                            path=\"/contacts\"\n                            component={Contacts}\n                        />,\n                        <Route\n                            path=\"/section/:id\"\n                            render={({match}) => {\n                                if (match.params.id)\n                                    return (\n                                        <SectionPage\n                                            sectionId={match.params.id}\n                                        />\n                                    );\n                                return <Redirect to=\"/\" />;\n                            }}\n                        />,\n                        <Route render={() => <Redirect to=\"/\" />} />\n                ]}\n                modalRoute={\n                    <Route path=\"/tattoo/:id\" render={props =>\n                        <TattooPageModal {...props} className=\"content__tattoo-modal\" />\n                    }/>\n                }\n            />\n        </div>\n    );\n}\n\nconst SectionPage : React.FC<{sectionId: string}> = ({sectionId}) => {\n    const [section,setSection] = useState<StoreSection | null>(null);\n    const [items,setItems] = useState<StoreItem[]>([]);\n    const [loaded,setLoaded] = useState(false);\n\n    const { findSection, getItems } = useContext(StoreContext);\n\n    useEffect(() => {\n        findSection(sectionId)\n            .then((section) => {\n                if (section) {\n                    setSection(section);\n                    return getItems(section);\n                } else {\n                    setLoaded(true);\n                    return [];\n                }\n            })\n            .then((items) => {\n                setItems(items);\n                setLoaded(true);\n            })\n    }, [sectionId, findSection, getItems]);\n\n    if (loaded && section && items.length){\n        return (<div className=\"content__inner\">\n            <Section\n                className=\"content__section\"\n                title={section.title}\n                items={items}\n                />\n        </div>)\n    } else if (loaded && !section) {\n        return (<div className=\"content__inner\">\n            <h2>Not found</h2>\n        </div>)\n    } else {\n        return (<div className=\"content__inner\">\n            <h2>Loading...</h2>\n        </div>)\n    }\n};\n\nexport default Content;\n","// Footer\nimport React from 'react';\nimport './Footer.scss';\n\nconst Footer : React.FC = () => {\n    return (\n        <div className=\"footer app__footer\">\n            <p>\n                Test shop project\n            </p>made by <a href=\"https://github.com/maxhha\">max_hha</a>\n        </div>\n    )\n}\nexport default Footer;\n","import { hot } from \"react-hot-loader/root\";\nimport React, { useReducer } from 'react';\nimport {HashRouter as Router} from 'react-router-dom';\nimport './App.scss';\n\nimport StoreContext from \"apis/StoreContext\";\nimport CartContext, { CartReducer } from \"components/CartContext\";\n\nimport Header from 'components/Header';\nimport Content from 'components/Content';\nimport Footer from 'components/Footer';\n\nimport { IStore } from \"types\";\n\nconst App: React.FC<{store: IStore}> = ({store}) => {\n  store.setVersion(\"1.02\");\n\n  const cartInitialState = {items: [], price: 0};\n  const cartReduced = useReducer(\n      withLocalStorage(\"cart\", CartReducer),\n      cartInitialState,\n      reducerLocalStorageInit(\"cart\")\n  );\n\n  return (\n    <div className=\"app\">\n        <StoreContext.Provider value={store}>\n            <CartContext.Provider value={cartReduced}>\n                <Router>\n                    <Header />\n                    <Content />\n                    <Footer />\n                </Router>\n            </CartContext.Provider>\n        </StoreContext.Provider>\n    </div>\n  );\n}\n\nfunction withLocalStorage<F extends any[], FR>(saveKey: string, fn: (...args: F) => FR){\n    return (...args: F) => {\n        const result : FR = fn(...args);\n        try {\n            window.localStorage.setItem(saveKey, JSON.stringify(result))\n        } catch(e) {\n            console.error(e)\n        }\n        return result;\n    }\n}\n\nfunction reducerLocalStorageInit<S>(saveKey: string){\n    return (initState: S) => {\n        let state : S = initState;\n        try {\n            const data = window.localStorage.getItem(saveKey);\n            if (data)\n                state = JSON.parse(data);\n        } catch(e) {\n            console.error(e);\n        }\n\n        return state;\n    }\n}\n\nexport default hot(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { IStore, StoreSection, StoreItem} from \"types\";\nimport Unsplash, {toJson} from \"unsplash-js\";\nimport { sample, capitalize } from \"lodash\";\n\ntype LocalDatabase = {\n    sections: StoreSection[];\n    items: {[sectionId: string]: StoreItem[]};\n}\n\n\nconst COUNT_ITEMS_PER_SECTION = 25;\nconst COUNT_SECTIONS = 10;\n\nconst sectionNames = \"Популярные;Новые;Яркие;Популярные у девушек;Популярные у мужчин;Детские;Черные;Стойкие;Крупные;Со смыслом\".split(\";\");\nconst tattooAdjective = \";Глубинн ыйай;Высок ийая;Широк ийая;Сильн ыйая;Крепк ийая;Узк ийая;Длинн ыйая;Колюч ийая;Немыслим ыйая;Абстрактн ыйая;Холодн ыйая;Горяч ыйая;Мрачн ыйая;Черн ыйяя;Кровав ыйая;Млечн ыйая;Бесконечн ыйая;Весёл ыйая;Светл ыйая\".split(';')\nconst tattooNoun = \"м день;м джек;м путь;м Бог;м конёк;м крест;ж коса;ж головоломка;ж загадка;ж бабочка;м череп;м гроб;м цветок;ж ваза;м маяк;м дракон;м кот;ж птичка;ж пиратка;м пират;м бриллиант\".split(';')\n\nfunction getRandomTattooName(): string{\n    const adj = sample(tattooAdjective) as string;\n    const noun = sample(tattooNoun) as string;\n    return capitalize((adj.replace(/.(..)(..)$/, noun[0] === \"м\" ? \"$1\" : \"$2\")\n        + noun.replace(/[мж]/, \"\")\n    ).trim());\n}\n\nfunction getRandomTattooPrice() : number {\n    return (Math.floor(Math.random()*60 + 2)*25)\n}\n\nclass Store implements IStore {\n    private __unsplash: any;\n    private __database: LocalDatabase | undefined;\n    private __databaseLoadPromise: Promise<void>;\n\n    constructor(\n        ACCESS_APP_KEY : string | undefined,\n        APP_SECRET : string | undefined,\n        private __version? : string | undefined\n    ) {\n\n        if (ACCESS_APP_KEY === undefined || APP_SECRET === undefined) {\n            throw Error('Unsplash key or secret is undefined');\n        }\n\n        this.__unsplash = new Unsplash({\n            applicationId: ACCESS_APP_KEY as string,\n            secret: APP_SECRET as string\n        });\n\n        this.__databaseLoadPromise = this.__loadDatabase();\n    }\n\n    setVersion = (v:string) => {\n        if (this.__version === v)\n            return;\n        this.__version = v;\n        this.__databaseLoadPromise = this.__loadDatabase();\n    }\n\n    private async __loadDatabase(){\n        let database = this.__getDatabaseFromLocalStorage();\n        if (database) {\n            console.log('Database was loaded from localStorage.')\n            this.__database = database;\n            return Promise.resolve();\n        } else {\n            console.log('Loading database from server...');\n            const promise = this.__loadDatabaseFromService();\n            promise.then(() => this.__saveDatabaseToLocalStorage())\n            return promise;\n        }\n    }\n\n    private __getDatabaseFromLocalStorage() : LocalDatabase | undefined{\n        let db;\n        try {\n            db = localStorage.getItem('db') || \"{}\";\n            db = JSON.parse(db);\n        } catch(e) {\n            console.error(e);\n            db = {};\n        }\n        if (!this.__version) {\n            this.__version = db.v;\n        }\n        const isTargetVersion = (\"v\" in db && db.v === this.__version);\n        if (\"data\" in db && isTargetVersion) {\n            return db[\"data\"];\n        }\n        return undefined;\n    }\n\n    private __saveDatabaseToLocalStorage() {\n        try {\n            let db = JSON.stringify({\"data\": this.__database, \"v\": this.__version});\n            localStorage.setItem('db', db);\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    private async __loadDatabaseFromService() : Promise<void> {\n        return this.__unsplash\n            .search.photos(\"tattoos\", 0, COUNT_ITEMS_PER_SECTION * COUNT_SECTIONS)\n            .then(toJson)\n            .then((json : any) => {\n                const database : LocalDatabase = {\n                    sections: [],\n                    items: {},\n                }\n\n                for(let i = 0; i < COUNT_SECTIONS; i++) {\n                    const sectionId = i.toString()\n                    database.sections.push({\n                        id: sectionId,\n                        title: sectionNames[i]\n                    });\n                    database.items[sectionId] = [];\n                }\n\n                json.results.forEach(\n                    ({urls:{raw}, id} : any, i : number) => {\n                        const sectionId = database.sections[i % COUNT_SECTIONS].id;\n\n                        database.items[sectionId].push({\n                            id,\n                            imageUrl: raw,\n                            title: getRandomTattooName(),\n                            price: getRandomTattooPrice(),\n                        });\n                    }\n                );\n                this.__database = database;\n                return Promise.resolve();\n            }).catch((e : Error) => {\n                console.error(e);\n                return Promise.resolve();\n            });\n    }\n    // This methods supposed to use as fetch db\n    // but unsplash has limits on calls to api\n    // so store loades database ones\n    // and then returns results from local savings\n    getSections = async () => {\n        return this.__databaseLoadPromise.then(() =>\n            this.__database ? this.__database.sections : []\n        );\n    }\n\n    findSection = async (id: string) => {\n        return  this.__databaseLoadPromise.then(() => {\n            const section = this.__database && (\n                this.__database.sections\n                    .find(section => section.id === id)\n            );\n            return section || null;\n        });\n    }\n\n    getItems = async ({id} : StoreSection) => {\n        return this.__databaseLoadPromise.then(() =>\n            this.__database ? this.__database.items[id] : []\n        )\n    }\n\n    findItem = async (id:string) => {\n        return  this.__databaseLoadPromise.then(() => {\n            const item = this.__database && (\n                Object.values(this.__database.items)\n                    .flat()\n                    .find(item => item.id === id)\n            );\n            return item || null;\n        });\n    }\n}\n\nexport default Store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport Store from \"apis/Store\";\n\nconst store = new Store(\n    process.env.REACT_APP_UNSPLASH_APP_ACCESS_KEY,\n    process.env.REACT_APP_UNSPLASH_APP_SECRET);\n\n\nReactDOM.render(<App store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}