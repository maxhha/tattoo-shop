{"version":3,"sources":["assets/images/logo.png","apis/StoreContext.ts","components/CartContext.ts","components/commons/LinkButton/index.tsx","components/Header/Menu/index.tsx","components/Header/index.tsx","components/commons/ModalSwitch.tsx","components/TattooPage/index.tsx","components/TattooPage/Modal.tsx","components/Content/About.tsx","components/Content/Section/TattooItem.tsx","components/Content/Section/index.tsx","components/Content/Home.tsx","components/Content/Cart/index.tsx","components/Content/Payment.tsx","components/Content/Delivery.tsx","components/Content/Contacts.tsx","components/Content/index.tsx","components/Footer/index.tsx","App.tsx","serviceWorker.ts","apis/Store.ts","index.tsx"],"names":["module","exports","__webpack_require__","p","StoreContext","createContext","CartReducer","state","action","type","Object","objectSpread","items","concat","toConsumableArray","item","hidden","price","find","i","id","filter","_a","withRouter","props","history","to","location","match","staticContext","onClick","replace","rest","objectWithoutProperties","react_default","a","createElement","assign","event","push","Menu","_useState","useState","_useState2","slicedToArray","menuVisible","setMenuVisibility","refMenu","createRef","useEffect","handleClick","e","target","current","contains","document","addEventListener","removeEventListener","hide","className","classNames","ref","title","menu__popup-list_active","children","map","f","el","key","Header","_React$useState","React","_React$useState2","sections","setSections","getSections","useContext","then","s","Header_Menu","_ref","commons_LinkButton","disabled","react_router","render","_ref2","src","logo","alt","ModalSwitch","previousLocation","_this","nextProps","this","isModal","modal","_this$props","switchChildren","modalRoute","Component","ModalSwitchRoute","routeProps","ModalSwitch_ModalSwitch","params","undefined","loading","_useState2$","setLoaderState","findItem","_useContext2","CartContext","_useContext3","cart","dispatchCart","addedToCart","stopPropagation","imageUrl","goBack","TattooPageModal","RemoveScroll","fullWidth","Combination","components_TattooPage","About","href","TattooItem","react_router_dom","pathname","Section","Section_TattooItem","Home","setItems","getItems","Promise","all","section","loadedItems","length","Content_Section","slice","CartItem","onRemove","onHide","onShow","Cart","_useContext","_useContext2$","Cart_CartItem","Payment","Delivery","Contacts","SectionPage","sectionId","_useState3","_useState4","setSection","_useState5","_useState6","_useState7","_useState8","loaded","setLoaded","findSection","Content","commons_ModalSwitch","exact","path","Content_Home","component","Content_SectionPage","TattooPage_Modal","Footer","hot","store","setVersion","saveKey","fn","cartReduced","useReducer","result","apply","arguments","window","localStorage","setItem","JSON","stringify","console","error","initState","data","getItem","parse","reducerLocalStorageInit","apis_StoreContext","Provider","value","components_Header","components_Content","components_Footer","Boolean","hostname","sectionNames","split","tattooAdjective","tattooNoun","getRandomTattooName","adj","sample","noun","capitalize","trim","Store","ACCESS_APP_KEY","APP_SECRET","__version","classCallCheck","__unsplash","__database","__databaseLoadPromise","v","__loadDatabase","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","abrupt","stop","_callee2","_context2","_x","_ref4","_callee3","_ref3","_context3","_x2","_ref5","_callee4","_context4","values","flat","_x3","Error","Unsplash","applicationId","secret","database","__getDatabaseFromLocalStorage","log","resolve","promise","__loadDatabaseFromService","_this2","__saveDatabaseToLocalStorage","db","isTargetVersion","search","photos","COUNT_ITEMS_PER_SECTION","toJson","json","toString","results","forEach","_ref6","raw","urls","Math","floor","random","_this3","catch","process","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.83e81662.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.99ea3e58.png\";","import {createContext, Context} from 'react';\nimport { IStore } from 'types';\n\nconst StoreContext : Context<IStore> = createContext({} as IStore);\n\nexport default StoreContext;\n","import { createContext } from \"react\";\n\nimport { StoreItem, CartItem } from \"types\";\n\ninterface CartState {\n    items: CartItem[],\n    price: number\n}\n\ninterface ActionAdd {\n    type: 'add'\n    item: StoreItem\n}\n\ninterface ActionRemove {\n    type: 'remove'\n    id: string\n}\n\ninterface ActionHide {\n    type: 'hide'\n    item: CartItem\n}\n\ninterface ActionShow {\n    type: 'show'\n    item: CartItem\n}\n\ntype Action = ActionAdd | ActionRemove | ActionHide | ActionShow;\n\nexport const CartReducer = (state : CartState, action : Action) => {\n    switch(action.type){\n        case 'add': {\n            return {\n                ...state,\n                items: [\n                    ...state.items,\n                    {...action.item, hidden: false}\n                ],\n                price: state.price + action.item.price\n            }\n        } case 'remove': {\n            const item = state.items.find(i => i.id === action.id);\n            return {\n                ...state,\n                items: state.items.filter(i => i !== item),\n                price: item ? state.price - item.price : state.price\n            }\n        } case 'show': {\n            let price = state.price;\n            if (action.item.hidden) {\n                price += action.item.price\n                action.item.hidden = false;\n            }\n            return {\n                ...state,\n                price\n            }\n        } case 'hide': {\n            let price = state.price;\n            if (!action.item.hidden) {\n                price -= action.item.price\n                action.item.hidden = false;\n            }\n            action.item.hidden = true;\n            return {\n                ...state,\n                price\n            }\n        }\n    }\n};\n\ntype ContextType = [CartState, React.Dispatch<Action>];\n\nconst initialState : ContextType = [\n    {items: [], price: 0},\n    (_a) => {}\n]\n\nexport default createContext<ContextType>(initialState);\n","import React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport * as H from \"history\";\n\ninterface LinkButtonProps extends RouteComponentProps<any>, React.ButtonHTMLAttributes<HTMLButtonElement> {\n    to: H.LocationDescriptor;\n    replace?: boolean;\n    innerRef?: React.Ref<HTMLAnchorElement>;\n}\n\nconst LinkButton : React.FC<LinkButtonProps> = (props) => {\n  const {\n    history,\n    location,\n    match,\n    staticContext,\n    to,\n    onClick,\n    replace,\n    // ⬆ filtering out props that 'button' doesnt know what to do with.\n    ...rest\n  } = props\n  return (\n    <button\n      {...rest} // 'children' is just another prop!\n      onClick={(event) => {\n        onClick && onClick(event);\n        const method = replace ? history.replace : history.push;\n        method(to as any) // rude fix of some type casting bug\n      }}\n    />\n  )\n}\n\nexport default withRouter(LinkButton);\n","// Menu\nimport React, {useState, useEffect, createRef} from 'react';\nimport classNames from \"classnames\";\nimport \"./Menu.scss\";\n\ntype Props = {\n    className?: string,\n    children: ((hide: () => void, hidden: boolean) => (React.ReactElement | {key: any}))[],\n    title: string\n}\n\nconst Menu : React.SFC<Props> = (props) => {\n\n    const [menuVisible, setMenuVisibility] = useState(false);\n    const refMenu = createRef<HTMLDivElement>()\n\n    useEffect(() => {\n        const handleClick = (e : Event) => {\n            if (e.target && refMenu.current && !refMenu.current.contains(e.target as Node))\n                setMenuVisibility(false)\n        };\n        document.addEventListener('click', handleClick)\n        return () => {\n            document.removeEventListener('click', handleClick)\n        }\n    })\n\n    const hide = () => setMenuVisibility(false)\n\n    return (\n        <div className={classNames(\"menu\", props.className)} ref={refMenu}>\n            <div className=\"menu__title\" onClick={()=>setMenuVisibility(true)}>{props.title}</div>\n            <ul className={classNames(\"menu__popup-list\", {'menu__popup-list_active':menuVisible})}>\n                {props.children.map((f) => {\n                    let el = f(hide, !menuVisible);\n                    return (<li className=\"menu__item\" key={el.key}>\n                        {el}\n                    </li>)\n                })}\n            </ul>\n        </div>\n    );\n};\n\nexport default Menu;\n","// Header\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport LinkButton from 'components/commons/LinkButton';\nimport Menu from \"./Menu\";\nimport classNames from \"classnames\";\nimport logo from \"assets/images/logo.png\";\nimport \"./Header.scss\";\n\nimport { StoreSection } from \"types\";\nimport StoreContext from \"apis/StoreContext\";\n\ntype Props = {className?: string}\n\nconst Header : React.SFC<Props> = (props) => {\n\n    const  [sections, setSections] = React.useState([] as StoreSection[]);\n    const { getSections } = React.useContext(StoreContext);\n    React.useEffect(() => {\n        getSections().then((s) => setSections(s))\n    }, [getSections])\n\n    return (\n        <header className={classNames(\"header\", props.className)}>\n            <nav className=\"nav header__side header__nav\">\n                <Menu className=\"nav__menu\" title=\"Категроии\">\n                    {sections.map(({id, title}) => (hide : () => void, hidden: boolean) =>\n                            <LinkButton\n                                to={`/section/${id}`}\n                                className=\"nav__button nav__menu-item\"\n                                key={id}\n                                onClick={hide}\n                                disabled={hidden}\n                            >{title}</LinkButton>\n                    )}\n                </Menu>\n                <LinkButton to='/about' className=\"button nav__button\">О нас</LinkButton>\n                <LinkButton to='/contacts' className=\"button nav__button\">Контакты</LinkButton>\n            </nav>\n            <Route render={({history})=>\n                <img\n                    className=\"header__logo\"\n                    onClick={() => history.push('/')}\n                    src={logo}\n                    alt=\"Logo\"\n                />\n            }/>\n            <nav className=\"nav header__side header__nav\">\n                <LinkButton to='/cart' className=\"button nav__button\">Корзина</LinkButton>\n                <LinkButton to='/payment' className=\"button nav__button\">Оплата</LinkButton>\n                <LinkButton to='/delivery' className=\"button nav__button\">Доставка</LinkButton>\n            </nav>\n        </header>\n    );\n};\n\nexport default Header;\n","import React from 'react';\nimport { Switch, Route, RouteComponentProps } from \"react-router-dom\";\n\ninterface ModalSwitchRouteProps {\n    switchChildren?: React.ReactNode,\n    modalRoute?: React.ReactElement<Route>\n}\n\nconst ModalSwitchRoute : React.FC<ModalSwitchRouteProps> = (props) => {\n    return (<Route render={routeProps =>\n        <ModalSwitch {...routeProps} {...props}/>\n    } />);\n}\n\ninterface ModalSwitchProps extends ModalSwitchRouteProps, RouteComponentProps<any, any, any>{}\n\nclass ModalSwitch extends React.Component<ModalSwitchProps>{\n    previousLocation = this.props.location;\n\n    componentWillUpdate(nextProps : ModalSwitchProps) {\n        let { location } = this.props;\n\n        const isModal = (!location.state || !location.state.modal);\n\n        if (\n          nextProps.history.action !== \"POP\" &&\n          isModal\n        ) {\n          this.previousLocation = this.props.location;\n        }\n    }\n\n    render() {\n        const { location, switchChildren,  modalRoute} = this.props;\n\n        const isModal = !!(\n          location.state &&\n          location.state.modal &&\n          this.previousLocation !== location\n        ); // not initial render\n\n        return (<div>\n            <Switch\n                location={isModal ? this.previousLocation : location}\n                children={switchChildren}\n            />\n            {isModal ? modalRoute : null}\n      </div>)\n    }\n}\n\nexport default ModalSwitchRoute;\n","//Tattoo Page\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router\";\nimport \"components/commons/cart-button.scss\";\nimport \"./TattooPage.scss\";\nimport classNames from \"classnames\";\nimport { StoreItem } from \"types\";\n\nimport StoreContext from \"apis/StoreContext\";\nimport CartContext from \"components/CartContext\";\n\ninterface MatchProps {\n    id: string\n}\n\ninterface Props extends RouteComponentProps<MatchProps> {\n    className?: string\n}\n\nconst TattooPage : React.FC<Props> = (props) => {\n    const params = props.match && props.match.params;\n    const { id } = params || {id: undefined};\n\n    const [{item, loading}, setLoaderState] = useState<{\n        item: StoreItem | null,\n        loading: boolean\n    }>({\n        item: null, loading: true\n    });\n\n    const { findItem } = useContext(StoreContext);\n    const [cart, dispatchCart] = useContext(CartContext);\n    const addedToCart = !!id && !!cart.items.find(i => i.id === id);\n\n    useEffect(() => {\n        if (id)\n            findItem(id).then((item) => setLoaderState({item, loading: false}));\n    },[findItem, setLoaderState, id]);\n\n    const isModal = (!props.location.state || !props.location.state.modal);\n\n    if (id && !loading && item) {\n        return (\n            <div\n                className={classNames(\"tattoo-page\", props.className)}\n                onClick={(e) => e.stopPropagation()}\n            >\n                <div className=\"tattoo-page__image-wrapper\">\n                    <img\n                        className=\"tattoo-page__image\"\n                        src={`${item.imageUrl}?auto=format&fit=crop&w=640&q=90`}\n                        alt={item.title}\n                    />\n                </div>\n                <div className=\"tattoo-page__info\">\n                    <h2 className=\"tattoo-page__title\">{item.title}</h2>\n                    <h3 className=\"tattoo-page__price\">{item.price+\"р\"}</h3>\n                    <button\n                        className=\"cart-button tattoo-page__to-cart\"\n                        onClick={() => {\n                            if (addedToCart)\n                                dispatchCart({\n                                    type: \"remove\",\n                                    id: item.id\n                                })\n                            else if (!loading)\n                                dispatchCart({\n                                    type: \"add\",\n                                    item: item\n                                })\n                        }}\n                    >\n                        {addedToCart ? \"Убрать из корзины\" : \"В корзину\"}\n                    </button>\n                    <p className=\"tattoo-page__description\"> Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: сплочённость команды профессионалов в значительной степени обусловливает важность соответствующих условий активизации. А ещё стремящиеся вытеснить традиционное производство, нанотехнологии ограничены исключительно образом мышления. </p>\n                </div>\n                {isModal && (\n                    <button\n                        className=\"tattoo-page__close\"\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            props.history.goBack();\n                        }}\n                    />\n                )}\n            </div>\n        );\n    } else if (id && loading) {\n        return (<h2 >Loading...</h2>);\n    } else {\n        return (<h2>Oops... something broke</h2>);\n    }\n}\n\nexport default withRouter(TattooPage);\n","import React from \"react\";\nimport { RouteChildrenProps, Redirect } from \"react-router\";\nimport classNames from \"classnames\";\nimport {RemoveScroll} from \"react-remove-scroll\";\n\nimport \"./Modal.scss\";\nimport TattooPage from \"components/TattooPage\";\n\ninterface Props extends RouteChildrenProps<{id: string}> {\n    className?: string\n}\n\nconst TattooPageModal : React.FC<Props> = (props) => {\n\n    const params = props.match && props.match.params;\n    if (params && params.id) {\n        return (<div className={classNames(\"tattoo-modal\", props.className, RemoveScroll.classNames.fullWidth)} onClick={(e) => {\n            e.stopPropagation();\n            props.history.goBack();\n        }}>\n                <RemoveScroll className=\"tattoo-modal__inner\"><TattooPage /> </RemoveScroll>\n            </div>);\n    } else {\n        return <Redirect to=\"/\" />;\n    }\n}\n\nexport default TattooPageModal;\n","import React from \"react\";\n\nconst About : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">О нас</h2>\n            <p className=\"text-about\">Нет никаких нас.</p>\n            <p className=\"text-about\">\n            Этот сайт был создан <a href=\"https://github.com/maxhha\">мной</a>,\n            чтобы изучить связку <a href=\"https://reactjs.org/\">React</a>{' + '}\n            <a href=\"https://www.typescriptlang.org/\">Typescript</a>.\n            Попутно мне пришлось разобраться\n            c <a href=\"https://webpack.js.org/\">Webpack</a>'ом,\n            чтобы сконфигурировать автозагруку изменений приложения.\n            Вовремя разработки я старался соблюдать best practices, постоянно\n            гугля всякие мелочи, например: файловая структура проекта,\n            создание апи на клиенте, как сделать роутер-кнопку и т.д.\n            В общем, достаточно хорошо прокачал свои скилы в фронтенд разработке на React.\n            </p>\n            <p className=\"text-about\">\n            В целом, для этого проекта можно было не использовать Typescript,\n            потому что я почти всегда знал, какие аргументы нужны компонентам\n            и функциям, но в командной разработке, уверен, он сыграет важную роль.\n            Не могло не радовать то, что, благодаря строгой типизации, каждый раз\n            после исправления всех подсвечиваемых ошибок в редакторе приложение всегда\n            работало так, как нужно {'>w<'}.\n            </p>\n            <p className=\"text-about\">\n            Названия категорий я взял из какого-то генератора названий, а картинки\n            из <a href=\"https://unsplash.com\">Unspash</a>.\n            Дизайн приложения придумал сам.</p>\n        </section>\n    </div>)\n}\n\nexport default About;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { StoreItem } from \"types\";\n\ntype Props = {\n    item: StoreItem,\n}\n\nconst TattooItem : React.FC<Props> = ({item}) => {\n    const {id, imageUrl, title, price} = item\n    return (\n        <li className=\"tattoos-list__item\">\n            <Link to={{\n                pathname: `/tattoo/${id}`,\n                state: {modal: true}\n            }}>\n                <div className=\"tattoo aspect-ratio-square\">\n                    <img className=\"tattoo__image\" src={`${imageUrl}?auto=format&fit=crop&w=640&q=80`} alt={imageUrl} />\n                    <div className=\"tattoo__description\">\n                        <h2 className=\"tattoo__title\">{title}</h2>\n                        <div className=\"tattoo__price-wrapper\">\n                            <h2 className=\"tattoo__price\">{price+'р'}</h2>\n                        </div>\n                    </div>\n                </div>\n            </Link>\n        </li>\n    )\n}\n\nexport default TattooItem;\n","// Section\nimport React from 'react';\nimport classNames from \"classnames\";\nimport './Section.scss';\nimport \"$commons/helpers.scss\";\n\nimport { StoreItem } from \"types\";\nimport TattooItem from \"./TattooItem\";\n\ntype Props = {\n    className?: string;\n    title: string;\n    items: StoreItem[];\n}\n\nclass Section extends React.Component<Props> {\n    render() {\n        const {className, title, items} = this.props;\n        return (\n            <section className={classNames(\"section\", className)}>\n                <h2 className=\"section__title\">{title}</h2>\n                <ul className=\"tattoos-list\">\n                    {items.map((item) => <TattooItem item={item} key={item.id} />)}\n                </ul>\n            </section>\n        )\n    }\n}\n\nexport default Section;\n","import { StoreSection, StoreItem } from \"types\";\nimport React, { useState, useEffect, useContext } from \"react\";\n\nimport StoreContext from \"apis/StoreContext\";\nimport Section from \"./Section\";\n\ntype HomeProps = {\n    sections: StoreSection[],\n}\n\nconst Home : React.FC<HomeProps> = ({ sections }) => {\n    const [items, setItems] = useState([] as StoreItem[][]);\n\n    const { getItems } = useContext(StoreContext);\n\n    useEffect(() => {\n        Promise.all(sections.map((section) => getItems(section)))\n            .then((loadedItems) => setItems(loadedItems));\n    }, [sections, getItems])\n\n    return (\n        <div className=\"content__inner\">\n            <div className=\"face-image\">\n                <div className=\"face-image__title\">\n                    КРУТЫЕ ТАТУХИ ДЕЛАЮТ ТЕБЯ КРУТЫМ!\n                </div>\n            </div>\n            {items.length > 0 && sections.map(({id, title}, i) =>\n                <Section\n                    className=\"content__section\"\n                    title={title}\n                    key={id}\n                    items={items[i].slice(0,8)}\n                />\n            )}\n        </div>\n    );\n}\n\nexport default Home;\n","// Cart\nimport React, { useContext } from \"react\";\nimport classNames from \"classnames\";\nimport \"components/commons/cart-button.scss\";\nimport \"./Cart.scss\";\n\nimport { CartItem as ICartItem } from \"types\";\nimport CartContext from \"components/CartContext\";\nimport LinkButton from \"components/commons/LinkButton\";\n\nconst Cart : React.FC = () => {\n    const [{items, price}, dispatchCart] = useContext(CartContext);\n\n    const onHide = (item: ICartItem) =>\n        dispatchCart({type: \"hide\", item});\n\n    const onShow = (item: ICartItem) =>\n        dispatchCart({type: \"show\", item});\n\n    const onRemove = (item: ICartItem) =>\n        dispatchCart({type: \"remove\", id: item.id});\n\n    return (<div className=\"content__inner\">\n        <div className=\"seciton content__section cart\">\n            <h2 className=\"section__title\">Корзина</h2>\n            <div className=\"cart-list\">\n                {items.map(i =>\n                    <CartItem\n                        item={i}\n                        onHide={onHide}\n                        onShow={onShow}\n                        onRemove={onRemove}\n                        key={i.id}/>\n                )}\n            </div>\n            <div className=\"cart__summary\">\n                <h2 className=\"cart__price\">\n                    Всего: {price}р\n                </h2>\n                <LinkButton\n                    className=\"cart-button\"\n                    to=\"/payment\"\n                >Перейти к оплате</LinkButton>\n            </div>\n        </div>\n    </div>)\n}\n\ntype CartItemProps = {\n    item: ICartItem;\n    onRemove: (item: ICartItem) => void;\n    onHide: (item: ICartItem) => void;\n    onShow: (item: ICartItem) => void;\n}\n\nconst CartItem : React.FC<CartItemProps> = ({item, onRemove, onHide, onShow}) => {\n    return (<div className={classNames(\"cart-item\", item.hidden && \"cart-item_hidden\")}>\n        <div className=\"cart-item__image-wrapper\">\n            <img\n                className=\"cart-item__image\"\n                src={item.imageUrl+\"&auto=format&fit=crop&w=320&q=80\"}\n                alt=\"Tattoo\"\n            />\n        </div>\n        <div className=\"cart-item__description\">\n            <h2 className=\"cart-item__title\">{item.title}</h2>\n            <h3 className=\"cart-item__price\">{item.price}р</h3>\n        </div>\n        <div className=\"cart-item__panel\">\n            <button\n                className=\"cart-button cart-item__button\"\n                onClick={() => onRemove(item)}\n            >\n                Убрать\n            </button>\n            <button\n                className=\"cart-button cart-item__button\"\n                onClick={() => item.hidden ? onShow(item) : onHide(item)}\n            >\n                {item.hidden ? \"Показать\" : \"Скрыть\"}\n            </button>\n        </div>\n    </div>);\n}\n\nexport default Cart;\n","// payment\nimport React from \"react\";\n\nconst Payment : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">Оплата</h2>\n            <p className=\"text-about\">Увы, это не настоящий магазин, и оплаты здесь нет.</p>\n        </section>\n    </div>);\n}\n\nexport default Payment;\n","// Delivery\nimport React from \"react\";\n\nconst Delivery : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">Доставка</h2>\n            <p className=\"text-about\">Увы, это не настоящий магазин, и доставки здесь тоже нет.</p>\n        </section>\n    </div>);\n}\n\nexport default Delivery;\n","// Contacts\nimport React from \"react\";\n\nconst Contacts : React.FC = () => {\n    return (<div className=\"content__inner\">\n        <section className=\"section content__section\">\n            <h2 className=\"section__title\">Контакты</h2>\n            <p className=\"text-about\">Github: <a href=\"https://github.com/maxhha\">maxhha</a></p>\n            <p className=\"text-about\">Mail: <a href=\"mailto:devmaxhha@gmail.com\" target=\"_self\">devmaxhha@gmail.com</a></p>\n        </section>\n    </div>);\n}\n\nexport default Contacts;\n","// Content\nimport { StoreSection } from \"types\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport classNames from \"classnames\";\nimport \"./Content.scss\";\n\nimport ModalSwitch from \"components/commons/ModalSwitch\";\nimport StoreContext from \"apis/StoreContext\";\nimport TattooPageModal from \"components/TattooPage/Modal\";\nimport About from \"./About\";\nimport Home from \"./Home\";\nimport Cart from \"./Cart\";\nimport Payment from \"./Payment\";\nimport Delivery from \"./Delivery\";\nimport Contacts from \"./Contacts\";\nimport Section from \"./Section\";\nimport { StoreItem } from \"types\";\n\ntype Props = {\n    className?: string;\n};\n\nconst Content : React.FC<Props> = (props) => {\n    const [sections, setSections] = useState([] as StoreSection[]);\n    const {getSections} = useContext(StoreContext);\n    useEffect(() => {\n        getSections().then((sections) => setSections(sections))\n    }, [getSections])\n    return (\n        <div\n            className={classNames(\"content\", props.className)}\n            >\n            <ModalSwitch\n                switchChildren={[\n                        <Route\n                            exact path=\"/\"\n                            render = {() => <Home sections={sections.slice(0,3)}/>}\n                        />,\n                        <Route\n                            path=\"/about\"\n                            component={About}\n                        />,\n                        <Route\n                            path=\"/cart\"\n                            component={Cart}\n                        />,\n                        <Route\n                            path=\"/payment\"\n                            component={Payment}\n                        />,\n                        <Route\n                            path=\"/delivery\"\n                            component={Delivery}\n                        />,\n                        <Route\n                            path=\"/contacts\"\n                            component={Contacts}\n                        />,\n                        <Route\n                            path=\"/section/:id\"\n                            render={({match}) => {\n                                if (match.params.id)\n                                    return (\n                                        <SectionPage\n                                            sectionId={match.params.id}\n                                        />\n                                    );\n                                return <Redirect to=\"/\" />;\n                            }}\n                        />,\n                        <Route render={() => <Redirect to=\"/\" />} />\n                ]}\n                modalRoute={\n                    <Route path=\"/tattoo/:id\" render={props =>\n                        <TattooPageModal {...props} className=\"content__tattoo-modal\" />\n                    }/>\n                }\n            />\n        </div>\n    );\n}\n\nconst SectionPage : React.FC<{sectionId: string}> = ({sectionId}) => {\n    const [section,setSection] = useState<StoreSection | null>(null);\n    const [items,setItems] = useState<StoreItem[]>([]);\n    const [loaded,setLoaded] = useState(false);\n\n    const { findSection, getItems } = useContext(StoreContext);\n\n    useEffect(() => {\n        findSection(sectionId)\n            .then((section) => {\n                if (section) {\n                    setSection(section);\n                    return getItems(section);\n                } else {\n                    setLoaded(true);\n                    return [];\n                }\n            })\n            .then((items) => {\n                setItems(items);\n                setLoaded(true);\n            })\n    }, [sectionId, findSection, getItems]);\n\n    if (loaded && section && items.length){\n        return (<div className=\"content__inner\">\n            <Section\n                className=\"content__section\"\n                title={section.title}\n                items={items}\n                />\n        </div>)\n    } else if (loaded && !section) {\n        return (<div className=\"content__inner\">\n            <h2>Not found</h2>\n        </div>)\n    } else {\n        return (<div className=\"content__inner\">\n            <h2>Loading...</h2>\n        </div>)\n    }\n};\n\nexport default Content;\n","// Footer\nimport React from 'react';\nimport './Footer.scss';\n\nconst Footer : React.FC = () => {\n    return (\n        <div className=\"footer app__footer\">\n            <p>\n                Test shop project\n            </p>made by <a href=\"https://github.com/maxhha\">max_hha</a>\n        </div>\n    )\n}\nexport default Footer;\n","import { hot } from \"react-hot-loader/root\";\nimport React, { useReducer } from 'react';\nimport {HashRouter as Router} from 'react-router-dom';\nimport './App.scss';\n\nimport StoreContext from \"apis/StoreContext\";\nimport CartContext, { CartReducer } from \"components/CartContext\";\n\nimport Header from 'components/Header';\nimport Content from 'components/Content';\nimport Footer from 'components/Footer';\n\nimport { IStore } from \"types\";\n\nconst App: React.FC<{store: IStore}> = ({store}) => {\n  store.setVersion(\"1.02\");\n\n  const cartInitialState = {items: [], price: 0};\n  const cartReduced = useReducer(\n      withLocalStorage(\"cart\", CartReducer),\n      cartInitialState,\n      reducerLocalStorageInit(\"cart\")\n  );\n\n  return (\n    <div className=\"app\">\n        <StoreContext.Provider value={store}>\n            <CartContext.Provider value={cartReduced}>\n                <Router>\n                    <Header />\n                    <Content />\n                    <Footer />\n                </Router>\n            </CartContext.Provider>\n        </StoreContext.Provider>\n    </div>\n  );\n}\n\nfunction withLocalStorage<F extends any[], FR>(saveKey: string, fn: (...args: F) => FR){\n    return (...args: F) => {\n        const result : FR = fn(...args);\n        try {\n            window.localStorage.setItem(saveKey, JSON.stringify(result))\n        } catch(e) {\n            console.error(e)\n        }\n        return result;\n    }\n}\n\nfunction reducerLocalStorageInit<S>(saveKey: string){\n    return (initState: S) => {\n        let state : S = initState;\n        try {\n            const data = window.localStorage.getItem(saveKey);\n            if (data)\n                state = JSON.parse(data);\n        } catch(e) {\n            console.error(e);\n        }\n\n        return state;\n    }\n}\n\nexport default hot(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { IStore, StoreSection, StoreItem} from \"types\";\nimport Unsplash, {toJson} from \"unsplash-js\";\nimport { sample, capitalize } from \"lodash\";\n\ntype LocalDatabase = {\n    sections: StoreSection[];\n    items: {[sectionId: string]: StoreItem[]};\n}\n\n\nconst COUNT_ITEMS_PER_SECTION = 25;\nconst COUNT_SECTIONS = 10;\n\nconst sectionNames = \"Популярные;Новые;Яркие;Популярные у девушек;Популярные у мужчин;Детские;Черные;Стойкие;Крупные;Со смыслом\".split(\";\");\nconst tattooAdjective = \";Глубинн ыйай;Высок ийая;Широк ийая;Сильн ыйая;Крепк ийая;Узк ийая;Длинн ыйая;Колюч ийая;Немыслим ыйая;Абстрактн ыйая;Холодн ыйая;Горяч ыйая;Мрачн ыйая;Черн ыйяя;Кровав ыйая;Млечн ыйая;Бесконечн ыйая;Весёл ыйая;Светл ыйая\".split(';')\nconst tattooNoun = \"м день;м джек;м путь;м Бог;м конёк;м крест;ж коса;ж головоломка;ж загадка;ж бабочка;м череп;м гроб;м цветок;ж ваза;м маяк;м дракон;м кот;ж птичка;ж пиратка;м пират;м бриллиант\".split(';')\n\nfunction getRandomTattooName(): string{\n    const adj = sample(tattooAdjective) as string;\n    const noun = sample(tattooNoun) as string;\n    return capitalize((adj.replace(/.(..)(..)$/, noun[0] === \"м\" ? \"$1\" : \"$2\")\n        + noun.replace(/[мж]/, \"\")\n    ).trim());\n}\n\nfunction getRandomTattooPrice() : number {\n    return (Math.floor(Math.random()*60 + 2)*25)\n}\n\nclass Store implements IStore {\n    private __unsplash: any;\n    private __database: LocalDatabase | undefined;\n    private __databaseLoadPromise: Promise<void>;\n\n    constructor(\n        ACCESS_APP_KEY : string | undefined,\n        APP_SECRET : string | undefined,\n        private __version? : string | undefined\n    ) {\n\n        if (ACCESS_APP_KEY === undefined || APP_SECRET === undefined) {\n            throw Error('Unsplash key or secret is undefined');\n        }\n\n        this.__unsplash = new Unsplash({\n            applicationId: ACCESS_APP_KEY as string,\n            secret: APP_SECRET as string\n        });\n\n        this.__databaseLoadPromise = this.__loadDatabase();\n    }\n\n    setVersion = (v:string) => {\n        if (this.__version === v)\n            return;\n        this.__version = v;\n        this.__databaseLoadPromise = this.__loadDatabase();\n    }\n\n    private async __loadDatabase(){\n        let database = this.__getDatabaseFromLocalStorage();\n        if (database) {\n            console.log('Database was loaded from localStorage.')\n            this.__database = database;\n            return Promise.resolve();\n        } else {\n            console.log('Loading database from server...');\n            const promise = this.__loadDatabaseFromService();\n            promise.then(() => this.__saveDatabaseToLocalStorage())\n            return promise;\n        }\n    }\n\n    private __getDatabaseFromLocalStorage() : LocalDatabase | undefined{\n        let db;\n        try {\n            db = localStorage.getItem('db') || \"{}\";\n            db = JSON.parse(db);\n        } catch(e) {\n            console.error(e);\n            db = {};\n        }\n        if (!this.__version) {\n            this.__version = db.v;\n        }\n        const isTargetVersion = (\"v\" in db && db.v === this.__version);\n        if (\"data\" in db && isTargetVersion) {\n            return db[\"data\"];\n        }\n        return undefined;\n    }\n\n    private __saveDatabaseToLocalStorage() {\n        try {\n            let db = JSON.stringify({\"data\": this.__database, \"v\": this.__version});\n            localStorage.setItem('db', db);\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    private async __loadDatabaseFromService() : Promise<void> {\n        return this.__unsplash\n            .search.photos(\"tattoos\", 0, COUNT_ITEMS_PER_SECTION * COUNT_SECTIONS)\n            .then(toJson)\n            .then((json : any) => {\n                const database : LocalDatabase = {\n                    sections: [],\n                    items: {},\n                }\n\n                for(let i = 0; i < COUNT_SECTIONS; i++) {\n                    const sectionId = i.toString()\n                    database.sections.push({\n                        id: sectionId,\n                        title: sectionNames[i]\n                    });\n                    database.items[sectionId] = [];\n                }\n\n                json.results.forEach(\n                    ({urls:{raw}, id} : any, i : number) => {\n                        const sectionId = database.sections[i % COUNT_SECTIONS].id;\n\n                        database.items[sectionId].push({\n                            id,\n                            imageUrl: raw,\n                            title: getRandomTattooName(),\n                            price: getRandomTattooPrice(),\n                        });\n                    }\n                );\n                this.__database = database;\n                return Promise.resolve();\n            }).catch((e : Error) => {\n                console.error(e);\n                return Promise.resolve();\n            });\n    }\n    // This methods supposed to use as fetch db\n    // but unsplash has limits on calls to api\n    // so store loades database ones\n    // and then returns results from local savings\n    getSections = async () => {\n        return this.__databaseLoadPromise.then(() =>\n            this.__database ? this.__database.sections : []\n        );\n    }\n\n    findSection = async (id: string) => {\n        return  this.__databaseLoadPromise.then(() => {\n            const section = this.__database && (\n                this.__database.sections\n                    .find(section => section.id === id)\n            );\n            return section || null;\n        });\n    }\n\n    getItems = async ({id} : StoreSection) => {\n        return this.__databaseLoadPromise.then(() =>\n            this.__database ? this.__database.items[id] : []\n        )\n    }\n\n    findItem = async (id:string) => {\n        return  this.__databaseLoadPromise.then(() => {\n            const item = this.__database && (\n                Object.values(this.__database.items)\n                    .flat()\n                    .find(item => item.id === id)\n            );\n            return item || null;\n        });\n    }\n}\n\nexport default Store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport Store from \"apis/Store\";\n\nconst store = new Store(\n    process.env.REACT_APP_UNSPLASH_APP_ACCESS_KEY,\n    process.env.REACT_APP_UNSPLASH_APP_SECRET);\n\n\nReactDOM.render(<App store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}